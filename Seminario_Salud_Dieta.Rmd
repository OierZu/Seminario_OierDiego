---
title: "Salud y enfermedades relacionadas con la dieta"
author:
- Oier Zuñiga
- Diego Ramirez
date: "`r format(Sys.Date(), '%d de %B de %Y')`"
output:
  cleanrmd::html_document_clean:
    toc: true
      toc_float: true
      smooth_scroll: true
      collapsed: false
    number_sections: true
      theme: NULL
---

# ¿De que trata el informe?

La obesidad es un problema de salud pública que ha alcanzado proporciones epidémicas en todo el mundo. Este informe se centra en explorar la relación entre la obesidad y la salud, así como en analizar datos relevantes.

## Algunos datos que hemos obtendio y sus bases de datos de origen

### Primer Objetivo

Este conjunto de datos proporciona datos de población no identificados sobre la prevalencia de comorbilidad de diabetes e hipertensión en el condado de Allegheny.Los datos son proporcionados por tres organizaciones de atención administrada en el condado de Allegheny. Las siglas de las columnas hacen referencia a: "CT"--\> Control de la diabetes, "BTPAD"--\> Presión arterial diastólica basal, "BTPAN"--\> Presión arterial sistólica basal, "BTWAD"--\> Presión arterial diastólica media, "BTWAN"\--\> Presión arterial istólica media. "BTMAD"--\> Presión arterial media arterial, "BTMAN"--\> Presión arterial media arterial normal.\
Su enlace es [pinche aquí](https://catalog.data.gov/dataset/diabetes-hypertension-comorbidity)

```{r}
# Lee el archivo CSV
datos <- read.csv("Excels/DiabetesHipertension.csv", header = FALSE, sep = ";")

# Transpone los datos
datos_transpuestos <- t(datos)

# Calcula el número de filas y columnas necesarias
num_filas <- nrow(datos)
num_columnas <- ncol(datos)

# Calcula el número total de elementos y crea un vector con los datos en el orden deseado
nuevo_vector <- unlist(datos_transpuestos)
orden_columnas <- rep(1:num_columnas, each = num_filas)
orden_filas <- rep(1:num_filas, times = num_columnas)
orden_final <- order(orden_columnas, orden_filas)

# Crea un nuevo marco de datos con la distribución rotativa
nueva_tabla <- data.frame(matrix(nuevo_vector[orden_final], ncol = num_columnas, byrow = TRUE))

# Asigna los nombres de las columnas con la primera fila
colnames(nueva_tabla) <- as.character(datos[1, ])

# Elimina la primera fila (que ahora es la cabecera de las columnas)
nueva_tabla <- nueva_tabla[-1, ]

# Muestra el resultado
print(nueva_tabla)
```




### Segundo Objetivo

El Departamento de Salud del Condado de Allegheny ha generado esta lista de restaurantes de comida rápida exportando todas las cadenas de restaurantes sin un permiso de alcohol del Sistema de Tarifas y Permisos del Condado. Una cadena de restaurantes definida por el Condado es cualquier restaurante que tiene más de una ubicación en el Condado. Las cadenas de restaurantes capturan cadenas locales y nacionales (incluidas las cadenas nacionales de propiedad local) siempre que haya uno o más establecimientos en funcionamiento dentro del condado. Para ver el enlace pulse [aquí](https://catalog.data.gov/dataset/allegheny-county-fast-food-establishments#sec-dates).

```{r}
# Lee el archivo CSV
datos <- read.csv("Excels/FastFood.csv", header = FALSE, sep = ",")

# Transpone los datos
datos_transpuestos <- t(datos)

# Calcula el número de filas y columnas necesarias
num_filas <- nrow(datos)
num_columnas <- ncol(datos)

# Calcula el número total de elementos y crea un vector con los datos en el orden deseado
nuevo_vector <- unlist(datos_transpuestos)
orden_columnas <- rep(1:num_columnas, each = num_filas)
orden_filas <- rep(1:num_filas, times = num_columnas)
orden_final <- order(orden_columnas, orden_filas)

# Crea un nuevo marco de datos con la distribución rotativa
nueva_tabla <- data.frame(matrix(nuevo_vector[orden_final], ncol = num_columnas, byrow = TRUE))

# Asigna los nombres de las columnas con la primera fila
colnames(nueva_tabla) <- as.character(datos[1, ])

# Elimina la primera fila (que ahora es la cabecera de las columnas)
nueva_tabla <- nueva_tabla[-1, ]

# Muestra el resultado
print(nueva_tabla)
```

Estos datos incluyen recuentos de muertes por raza (total, negros, blancos) por grupo de edad y causa de muerte por área censal agregada durante un período de cinco años (2014-18). Datos extraídos del Sistema Electrónico de Registro de Defunciones (EDRS) de Pensilvania con el siguiente descargo de responsabilidad. Nosotros hemos aislado los casos de muertes que nos interesan, es decir, diabetes, para así poder trabajar con ellos. Para acudir al enlace pulse [aquí](https://catalog.data.gov/dataset/allegheny-county-mortality-indicators).

```{r}
# Lee el archivo CSV
datos <- read.csv("Excels/mortality_county_all.csv", header = FALSE, sep = ",")

# Filtrar filas que comienzan con "Diabetes" en la primera columna
datos_filtrados <- datos[grep("Diabetes", datos$V1), ]

# Mostrar el resultado
print(datos_filtrados)

```
```{r}
# Crear gráfico de líneas
grafico_lineas <- ggplot() +
  geom_line(data = nueva_tabla, aes(x = Category, y = V4, group = 1), color = "blue") +
  geom_line(data = datos_filtrados, aes(x = Category, y = V4, group = 1), color = "green") +
  labs(title = "Gráfico de líneas por establecimiento",
       x = "Tipo de establecimiento",
       y = "Valor") +
  theme_minimal()

# Muestra el gráfico de líneas
print(grafico_lineas)

```
### Tercer Objetivo

```{r}
# Lee el archivo CSV
datos <- read.csv("Excels/Cardiovascular.csv", header = FALSE, sep = ",")

# Transpone los datos
datos_transpuestos <- t(datos)

# Calcula el número de filas y columnas necesarias
num_filas <- nrow(datos)
num_columnas <- ncol(datos)

# Calcula el número total de elementos y crea un vector con los datos en el orden deseado
nuevo_vector <- unlist(datos_transpuestos)
orden_columnas <- rep(1:num_columnas, each = num_filas)
orden_filas <- rep(1:num_filas, times = num_columnas)
orden_final <- order(orden_columnas, orden_filas)

# Crea un nuevo marco de datos con la distribución rotativa
nueva_tabla <- data.frame(matrix(nuevo_vector[orden_final], ncol = num_columnas, byrow = TRUE))

# Asigna los nombres de las columnas con la primera fila
colnames(nueva_tabla) <- as.character(datos[1, ])

# Elimina la primera fila (que ahora es la cabecera de las columnas)
nueva_tabla <- nueva_tabla[-1, ]

# Filtrar las filas que tienen "Serie A" en la columna "Serie"
nueva_tabla_filtrada <- subset(nueva_tabla, nueva_tabla$Serie == "Serie A")

# Muestra el resultado
print(nueva_tabla_filtrada)


```

```{r}
# Gráfica de barras
grafico <- ggplot(nueva_tabla_filtrada, aes(x = Year, y = Value, fill = Territorio)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Gráfico de barras por Territorio",
       x = "Año",
       y = "Valor") +
  scale_fill_manual(values = c("ES" = "red", "ES70" = "green")) +
  theme_minimal()

# Muestra el gráfico
print(grafico)

```

Bibliografía

Aquí podeis encontrar las beses de datos que hemos utilizado para realizar este proyecto;

-   texto[<https://catalog.data.gov/dataset/?q=hypertension&sort=views_recent+desc&res_format=CSV&ext_location=&ext_bbox=&ext_prev_extent=&tags=hypertension>]

-   texto[<https://www.niddk.nih.gov/>]

-   texto[<https://www.niddk.nih.gov/>]

-   texto[<https://www.data.gov/>]

-   texto[<https://www.opendatasoft.com/>]

-   Texto[Url] dt pakage que se vea el codigo buscar codigo en ingles
