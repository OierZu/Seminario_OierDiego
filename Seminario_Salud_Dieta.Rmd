---
title: "Salud y enfermedades relacionadas con la dieta"
author:
- Oier Zu√±iga
- Diego Ramirez
date: "`r format(Sys.Date(), '%d de %B de %Y')`"
output:
  cleanrmd::html_document_clean:
    toc: true
    number_sections: true
    toc_float: true
    smooth_scroll: true
    number_section: true
    theme: NULL
---

# ¬øDe que trata el proyecto? üïµüèø

En este proyecto hemos tratado de abordar varias enfermedades que pueden ser **generadas por la dieta**. Para ello, hemos buscado informaci√≥n en diversas bases de datos las cuales nos han proporcionado grandes conjuntos de datos los cuales nos han sido de utilidad para llevar a cabo este trabajo de investigaci√≥n.

Algunas de estas bases de datos han sido;

-   [Base de datos del gobierno de Espa√±a](https://datos.gob.es/es/)
-   [Base de datos del gobierno de Estados Unidos](https://data.gov/)
-   [Base de datos del gobierno de Canarias](https://www3.gobiernodecanarias.org/aplicaciones/appsistac/ods/3-4-1/)
-   [Base de datos del gobierno de E.E.U.U](https://data.gov)
-   Entre otras las cuales mencionamos al final de este proyecto en su respectiva bibliograf√≠a.

## Explicaci√≥n de los objetivos del proyecto

A lo largo de nuestra busqueda de datos que tratar para nuestra investigaci√≥n, hemos llegado a la conclusi√≥n de dividir esta investigaci√≥n en **3 objetivos principales**, los cuales seran explicados individualmente en el siguiente apartado.

En estos 3 objetivos hemos usado datos e informaci√≥n diversa la cual hemos tratado de relacionar generando graficas distintas en cada uno de estos para poder visualizar con mayor facilidad estos datos.

Tambi√©n es importante mencionar que estos conjuntos de datos los hemos obtenido a partir de archivos **CSV** que hemos descargado he importado en este trabajo. Estos **CSV** los hemos sacado de algunas de las bases de datos mencionadas anteriormente.

# Objetivos principales üéØ

### Primer Objetivo

Para este primer objetivo hemos obtado por utilizar datos proporcionados por el estado de allegheny. Estos datos costan sobre diabetes e hipertensi√≥n en la poblaci√≥n de este estado, los cuales hemos utilizado para generar un ***BOXPLOT*** de cada una de las columnas obtenidas de este conjunto de datos;

**Columnas en cuesti√≥n;**

> -   **"CT"**--\> Control de la diabetes.
> -   **"BTPAD"**--\> Presi√≥n arterial diast√≥lica basal.
> -   **"BTPAN"**--\> Presi√≥n arterial sist√≥lica basal.
> -   **"BTWAD"**--\> Presi√≥n arterial diast√≥lica media.
> -   **"BTWAN"**\--\> Presi√≥n arterial ist√≥lica media.
> -   **"BTMAD"**--\> Presi√≥n arterial media arterial.
> -   **"BTMAN"**--\> Presi√≥n arterial media arterial normal.

Aqui dejamos el **URL** al archivo **CSV** utilizado en este objetivo [CSV](https://catalog.data.gov/dataset/diabetes-hypertension-comorbidity)

```{r}
#Primero procedemos a leer el archivo CSV con la posici√≥n del archivo, adem√°s indicamos que no tienen t√≠tulo las columnas y su separador es ";".
datos <- read.csv("Excels/DiabetesHipertension.csv", header = FALSE, sep = ";")

# Posteriormente trasponemos los datos reorganiz√°ndolos en un formato diferente.
datos_transpuestos <- t(datos)

# Despu√©s contamos el n√∫mero de filas y columnas que hay en ese formato.
num_filas <- nrow(datos)
num_columnas <- ncol(datos)

# Calculamos y creamos un vector con los datos deseados.
nuevo_vector <- unlist(datos_transpuestos)
orden_columnas <- rep(1:num_columnas, each = num_filas)
orden_filas <- rep(1:num_filas, times = num_columnas)
orden_final <- order(orden_columnas, orden_filas)

# Creamos una nueva gr√°fica con los vectores deseados siguiendo un dise√±o de matriz espec√≠fico.
nueva_tabla <- data.frame(matrix(nuevo_vector[orden_final], ncol = num_columnas, byrow = TRUE))

# Asignamos los nombres de las columnas de la primera fila.
colnames(nueva_tabla) <- as.character(datos[1, ])

# Eliminamos la primera fila
nueva_tabla <- nueva_tabla[-1, ]

# Finalmente mostramos el resultado
head(nueva_tabla)
```

```{r}
# La tabla anterior estaba con datos "character" por los que los pasamos a datos num√©ricos para poder trabajar con ellos"
copia_nueva_tabla <- as.data.frame(lapply(nueva_tabla, as.numeric))

head(copia_nueva_tabla)
```

#### Elaboraci√≥n Boxplot üõ†Ô∏è

Para la elaboraci√≥n de esta gr√°fica, entre ambos compa√±eros decidimos que la mejor idea podr√≠a ser crear una "Boxplot"(El Diagrama de Caja y bigotes es un tipo de gr√°fico que muestra un resumen de una gran cantidad de datos en cinco medidas descriptivas, adem√°s de intuir su morfolog√≠a y simetr√≠a) para agrupar estos datos espec√≠ficos. La idea nos vino de la asignatura de 2¬∫: Bioestad√≠sta.

Una vez cogimos la idea procedimos a buscar [videos tutoriales](https://www.youtube.com/watch?v=DzgK1V9XZc4) para aprender a crearlos.

```{r}
# Ahora generaremos boxplots para cada columna
par(mfrow = c(2, 4))  # Configuramos el dise√±o de la gr√°fica.
for (col in names(copia_nueva_tabla)) { #Creamos un bucle en el que se van creando las boxplot de las columnas.
  boxplot(copia_nueva_tabla[[col]], col = "green", main = paste("Boxplot de", col))
}

```

#### Conclusi√≥n objetivo 1 üìù

Una vez obtenidos estos Boxplots de las diferentes columnas, podemos comprobar con los datos del gobierno de EEUU de salud cu√°les son los par√°metros normales y compararlos con la media de nuestros resultados, observando que ciertamente son superiores en todos sus par√°metros.

### Segundo Objetivo

Estos datos incluyen recuentos de muertes por raza (total, negros, blancos) por grupo de edad y causa de muerte por √°rea censal agregada durante un per√≠odo de cinco a√±os (2014-18). Datos extra√≠dos del Sistema Electr√≥nico de Registro de Defunciones (EDRS) de Pensilvania con el siguiente descargo de responsabilidad. Nosotros hemos aislado los casos de muertes que nos interesan, es decir, diabetes, para as√≠ poder trabajar con ellos. Para acudir al enlace pulse [aqu√≠](https://catalog.data.gov/dataset/allegheny-county-mortality-indicators).

```{r}
# Leemos el archivo CSV indicandos su ruta en el c√≥digo.
datos <- read.csv("Excels/mortality_county_all.csv", header = FALSE, sep = ",")

# Filtramos filas que comienzan por "Diabetes" y se encuentran en la columna "V1"
datos_filtrados <- datos[grep("Diabetes", datos$V1), ]

# Mostramos el resultado de la tabla con la informaci√≥n que nos interesa.
print(datos_filtrados)


```

A continuaci√≥n procedemos a usar una gr√°fica combinada de l√≠neas y puntos para poder comprobar la tasa de mortalidad por diabetes seg√∫n la raza (blancos y negros), a su vez que la comparamos con la edad de los fallecidos. Un punto a tener en cuenta cuando observamos esta gr√°fica es que el eje Y (N¬∫ de muertes) no est√° ordenado por lo que s√≥lo debemos fijarnos en las zonas donde se encuentran los p√∫ntos, haciendo referencia a los intervalos de edad ofrecidos por el CSV.

```{r}
library(ggplot2)
library(dplyr)
# Creamos un gr√°fico utilizando ggplot
ggplot(datos_filtrados, aes(x = V3, y = V4, color = V2, group = V2)) +
  geom_line() + #A√±adimos las l√≠neas
  geom_point() + #A√±adimos los puntos
  labs(x = "Edad", y = "N√∫mero de muertos") +
  scale_color_manual(values = c("BLACK" = "red", "WHITE" = "blue")) + #Indicamos los valores y colores de cada l√≠nea/punto.
  theme_minimal() #ggplot2 nos ofrece distintas salidas visuales, elegimos esta por su simplicidad


```

<<<<<<< HEAD
#### Conclusi√≥n objetivo 2 üìù
=======

#### Conclusi√≥n

A partir de los datos gr√°ficos obtenidos, es posible inferir una correlaci√≥n entre la diabetes tipo 2 y la pertenencia √©tnica (blanca o negra).Estas conclusiones respaldan en parte lo que dicen los art√≠culos sobre este tema, mostrando que la raza tiene importancia en c√≥mo se manifiesta esta condici√≥n m√©dica. He [aqu√≠](https://www.aarp.org/espanol/salud/vida-saludable/info-2018/raza-y-el-riesgo-de-diabetes.html) un art√≠culo que lo respalda. Gracias a esta gr√°fica tambi√©n podemos observar que otra relaci√≥n entre la edad y el n¬∫ de muertes por esta causa. \### Tercer Objetivo

#### Conclusi√≥n objetivo 2
>>>>>>> 968489807ca50d4b59897e746c9dfc52448163c6

A partir de los datos gr√°ficos obtenidos, es posible inferir una correlaci√≥n entre la diabetes tipo 2 y la pertenencia √©tnica (blanca o negra).Estas conclusiones respaldan en parte lo que dicen los art√≠culos sobre este tema, mostrando que la raza tiene importancia en c√≥mo se manifiesta esta condici√≥n m√©dica. He [aqu√≠](https://www.aarp.org/espanol/salud/vida-saludable/info-2018/raza-y-el-riesgo-de-diabetes.html) un art√≠culo que lo respalda. Gracias a esta gr√°fica tambi√©n podemos observar que otra relaci√≥n entre la edad y el n¬∫ de muertes por esta causa.

### Tercer Objetivo


A continuaci√≥n procedemos a utlizar una gr√°fica de barras/columnas, en las que indicaremos de 2 colores (rojo y verde) cada lugar de origen (Espa√±a e Islas Canarias). El eje de las X corresponde a los a√±os trascurridos en los que se han recogido datos. El eje de las Y hace referencia a las cifras de fallecidos por enfermedades cardiovasculares.

```{r}
library(ggplot2)
# Leemos el archivo CSV indicando la ruta en la que se encuentra
datos <- read.csv("Excels/Cardiovascular.csv", header = FALSE, sep = ",")

# Transponemos los datos para organizarlos en un formato diferente
datos_transpuestos <- t(datos)

# Calculamos el n√∫mero de filas y columnas que hay realmente en el archivo comprimido.
num_filas <- nrow(datos)
num_columnas <- ncol(datos)

# Posteriormente calculamos el num total de elementos y creamos un vextor con los datos.
nuevo_vector <- unlist(datos_transpuestos)
orden_columnas <- rep(1:num_columnas, each = num_filas)
orden_filas <- rep(1:num_filas, times = num_columnas)
orden_final <- order(orden_columnas, orden_filas)

# Creamos un nuevo data frame llamado "nueva_tabla" organizando un vector en una matriz con el n√∫mero de columnas indicadas.
nueva_tabla <- data.frame(matrix(nuevo_vector[orden_final], ncol = num_columnas, byrow = TRUE))

# Asignamos los nombres de las columnas con la primera fila
colnames(nueva_tabla) <- as.character(datos[1, ])

# Eliminamos la primera fila (que ahora es la cabecera de las columnas)
nueva_tabla <- nueva_tabla[-1, ]

# Filtramos las filas que tienen "Serie A" en la columna "Serie", es decir, todas las de "Enfermedades cardiovasculares".
nueva_tabla_filtrada <- subset(nueva_tabla, nueva_tabla$Serie == "Serie A")

# Finalmente mostramos el resultado.
head(nueva_tabla_filtrada)


```

```{r}
# Cargar la biblioteca ggplot2

library(ggplot2)

# Resto de tu c√≥digo
grafico <- ggplot(nueva_tabla_filtrada, aes(x = Year, y = Value, fill = Territorio)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Gr√°fico de barras por Territorio",
       x = "A√±o",
       y = "Valor") +
  scale_fill_manual(values = c("ES" = "red", "ES70" = "green")) +
  theme_minimal()

# Muestra el gr√°fico
print(grafico)

# Gr√°fica de barras
grafico <- ggplot(nueva_tabla_filtrada, aes(x = Year, y = Value, fill = Territorio)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Gr√°fico de barras por Territorio",
       x = "A√±o",
       y = "Valor") +
  scale_fill_manual(values = c("ES" = "red", "ES70" = "green")) +
  theme_minimal()

# Muestra el gr√°fico
print(grafico)

```

#### Conclusi√≥n objetivo 3 üìù

Como podemos observar en esta gr√°fica en la parte superior, la tasa de mortalidad por enfermedades cardiovasculares, cada a√±o est√° subiendo m√°s y m√°s en "ES70", es decir, las Islas Canarias, mientras que en "ES" (Espa√±a), va disminuyendo notablemente. Este dato nos impacta ya que ambos datos est√°n recopilados en "por 100.000 habitantes" y Espa√±a es notablemente m√°s grande demogr√°ficamente que las Islas Canarias y, sin embargo, cada vez est√° m√°s cerca de alcanzar los datos de la pen√≠nsula. Como conclusi√≥n de esta gr√°fica podemos corroborar algunos art√≠culos como [este](https://www.eldiario.es/canariasahora/canarias-opina/obesidad-problema-social-canarias_1_10567486.html) en el que √≠ndica que cada vez hay m√°s y m√°s obesidad entre la poblaci√≥n canaria.

# Bibliograf√≠a

Y como todo buen proyecto, aqu√≠ os dejamos la bibliograf√≠a utilizada para la realizaci√≥n de este proyecto. En esta tabla podreis encontrar las beses de datos, webs y fuentes que hemos utilizado para realizar este proyecto.

**La tabla en cuestio√≥n**

| Informaci√≥n                     | Links                                                                                        |
|:---------------------------------------------|:-------------------------|
| Cardiovascular                  | [Link](https://www3.gobiernodecanarias.org/aplicaciones/appsistac/ods/3-4-1/)                |
| Diabetes e Hipertensi√≥n         | [Link](https://catalog.data.gov/dataset/diabetes-hypertension-comorbidity)                   |
| Fastfood                        | [Link](https://catalog.data.gov/dataset/allegheny-county-fast-food-establishments#sec-dates) |
| Motalidad                       | [Link](https://catalog.data.gov/dataset/allegheny-county-mortality-indicators)               |
| Tutorial boxplot                | [Link](https://www.youtube.com/watch?v=DzgK1V9XZc4)                                          |
| R markdown                      | [Link](https://bookdown.org/yihui/rmarkdown/)                                                |
| Sintaxis ReadMe                 | [Link](https://www.markdownguide.org/basic-syntax/)                                          |
| Emojis                          | [Link](https://emojipedia.org/shortcodes)                                                    |
| Google Schollar                 | [Link](https://scholar.google.es)                                                            |
| Base de datos gobierno Esp.     | [Link](https://datos.gob.es/es/)                                                             |
| Base de datos gobierno E.E.U.U. | [Link](https://data.gov)                                                                     |
| Base de datos gobierno Canarias | [Link](https://www3.gobiernodecanarias.org/aplicaciones/appsistac/ods/3-4-1/)                |
